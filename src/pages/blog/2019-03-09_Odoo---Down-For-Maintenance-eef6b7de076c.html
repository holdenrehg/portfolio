<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Odoo — Down For Maintenance</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Odoo — Down For Maintenance</h1>
</header>
<section data-field="subtitle" class="p-summary">
Give your users an explanation about what’s going on
</section>
<section data-field="body" class="e-content">
<section name="c75c" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4ded" id="4ded" class="graf graf--h3 graf--leading graf--title">Odoo — Down For Maintenance</h3><h4 name="41f3" id="41f3" class="graf graf--h4 graf-after--h3 graf--subtitle">Give your users an explanation about what’s going on</h4><figure name="d7e0" id="d7e0" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="0*UUNbVkk1l6qt39vK" data-width="7200" data-height="4800" data-unsplash-photo-id="C8jNJslQM3A" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*UUNbVkk1l6qt39vK"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@timmossholder?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com/@timmossholder?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-creator noopener" target="_blank">Tim Mossholder</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" data-href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="markup--anchor markup--figure-anchor" rel="photo-source noopener" target="_blank">Unsplash</a></figcaption></figure><p name="381b" id="381b" class="graf graf--p graf-after--figure">For every Odoo instance I configure, I add a Down For Maintenence page that displays when any 50x HTTP error occurs. This gives more information than a generic error page from the web server. That error page can really scare people when they don’t know what’s going on behind the scenes.</p><h3 name="4ac5" id="4ac5" class="graf graf--h3 graf-after--p">The web server (Nginx)</h3><p name="4efb" id="4efb" class="graf graf--p graf-after--h3">I’m using Nginx in this example, but it’s possible via any web server you are using. You can quickly install nginx on linux via <code class="markup--code markup--p-code">sudo apt install nginx</code> .</p><p name="bad2" id="bad2" class="graf graf--p graf-after--p">Here is an example of a very simple virtual host file located at <code class="markup--code markup--p-code">/etc/nginx/sites-enabled/my.website.com.conf</code> on our server:</p><figure name="942c" id="942c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-tySDUNjBb-zlHfPmrcBVw.png" data-width="1378" data-height="996" src="https://cdn-images-1.medium.com/max/800/1*-tySDUNjBb-zlHfPmrcBVw.png"></figure><p name="9c89" id="9c89" class="graf graf--p graf-after--figure">You’ll notice that we do not have https configured because it’s listening on port 80, we are using a domain name of <code class="markup--code markup--p-code">my.website.com</code> , and we are assuming that there is an Odoo instance running on the server with an <code class="markup--code markup--p-code">xmlrpcport</code> of 20102 and a <code class="markup--code markup--p-code">longpolling_port</code> of 20103.</p><p name="9947" id="9947" class="graf graf--p graf-after--p">Below those common configurations is where we are setting up our Down For Maintenence HTML page.</p><pre name="2e9f" id="2e9f" class="graf graf--pre graf-after--p">error_page 500 502 503 504 /50x.html;<br>location = /50x.html {<br>    root /usr/share/nginx/html;<br>    internal;<br>}</pre><p name="8c04" id="8c04" class="graf graf--p graf-after--pre">This says that any time a 500, 502, 503, or 504 error occurs, show the user the HTML page located at <code class="markup--code markup--p-code">/usr/share/nginx/html/50x.html</code> .</p><h3 name="5d2f" id="5d2f" class="graf graf--h3 graf-after--p">The HTML</h3><p name="9340" id="9340" class="graf graf--p graf-after--h3">Now let’s check out the HTML. This really can be anything you’d like, but as a simple example, I’m using a <a href="https://gist.github.com/pitch-gist/2999707" data-href="https://gist.github.com/pitch-gist/2999707" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">popular gist available</a> that I just slightly modified.</p><figure name="347c" id="347c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9Q3oy64NfZ7RfKJF5_6nVQ.png" data-width="1358" data-height="1896" src="https://cdn-images-1.medium.com/max/800/1*9Q3oy64NfZ7RfKJF5_6nVQ.png"></figure><p name="86ce" id="86ce" class="graf graf--p graf-after--figure">Keep things simple to start. A short paragraph that explains that there’s something going on and that we are working on it. If anyone needs to reach out, they can send an email to us.</p><h3 name="f9c7" id="f9c7" class="graf graf--h3 graf-after--p">End result</h3><p name="f698" id="f698" class="graf graf--p graf-after--h3">You can test it out by taking down your Odoo instance. Depending on how your Odoo instance is configured, you may run a <code class="markup--code markup--p-code">sudo service odoo stop</code> or if you <a href="https://medium.com/@reedrehg/easier-odoo-development-278bbaab38c8" data-href="https://medium.com/@reedrehg/easier-odoo-development-278bbaab38c8" class="markup--anchor markup--p-anchor" target="_blank">happen to be using Docker</a> (which I recommend) then you may run a <code class="markup--code markup--p-code">docker stop {my_container}</code> or <code class="markup--code markup--p-code">docker-compose stop</code> .</p><p name="ba0f" id="ba0f" class="graf graf--p graf-after--p">Either way, once the instance is down then you can navigate to your URL. In the example, that would be <a href="http://my.website.com" data-href="http://my.website.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">http://my.website.com</a>.</p><p name="bef5" id="bef5" class="graf graf--p graf-after--p">You’ll see your HTML page:</p><figure name="9468" id="9468" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*xKGSQm35HhhiHoqMhZugWQ.png" data-width="792" data-height="451" src="https://cdn-images-1.medium.com/max/800/1*xKGSQm35HhhiHoqMhZugWQ.png"></figure><h3 name="36e8" id="36e8" class="graf graf--h3 graf-after--figure">Thanks for reading</h3><p name="a262" id="a262" class="graf graf--p graf-after--h3">Hopefully, this helps you out with keeping your customers/users calm, aware, and happy.</p><p name="bf64" id="bf64" class="graf graf--p graf-after--p"><a href="https://twitter.com/reedrehg" data-href="https://twitter.com/reedrehg" class="markup--anchor markup--p-anchor" rel="nofollow noopener nofollow noopener noopener" target="_blank">Follow me on Twitter</a> for random thoughts and articles about Odoo. Or <a href="https://medium.com/@reedrehg" data-href="https://medium.com/@reedrehg" class="markup--anchor markup--p-anchor" target="_blank">follow me directly here at Medium</a> to stay up to date on my dev articles.</p><p name="f323" id="f323" class="graf graf--p graf-after--p graf--trailing">Holden</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@reedrehg" class="p-author h-card">Holden Rehg</a> on <a href="https://medium.com/p/eef6b7de076c"><time class="dt-published" datetime="2019-03-09T16:23:09.890Z">March 9, 2019</time></a>.</p><p><a href="https://medium.com/@reedrehg/odoo-down-for-maintenance-eef6b7de076c" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 31, 2020.</p></footer></article></body></html>